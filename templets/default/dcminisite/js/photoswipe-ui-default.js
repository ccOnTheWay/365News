/* PhotoSwipe Default UI - 4.1.0 - 2015-09-04
* http://photoswipe.com
* Copyright (c) 2015 Dmitry Semenov; */
(function(A,B){if(typeof define==="function"&&define.amd){define(B)}else{if(typeof exports==="object"){module.exports=B()}else{A.PhotoSwipeUI_Default=B()}}})(this,function(){var A=function(S,i){var j=this;var b=false,o=true,Z,Y,P,r,O,R,J,L=true,K,f,u,X,W,D,N,q,T={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4000,timeToIdleOutside:1000,loadingIndicatorDelay:1000,addCaptionHTMLFn:function(w,v){if(!w.title){v.children[0].innerHTML="";return false}v.children[0].innerHTML=w.title;return true},closeEl:true,captionEl:true,fullscreenEl:true,zoomEl:true,shareEl:true,counterEl:true,arrowEl:true,preloaderEl:true,tapToClose:false,tapToToggleControls:true,clickToCloseNonZoomable:true,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:true}],getImageURLForShare:function(){return S.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return S.currItem.title||""},indexIndicatorSep:" / "},a,d;var G=function(w){if(a){return true}w=w||window.event;if(q.timeToIdle&&q.mouseUsed&&!f){Q()}var z=w.target||w.srcElement,x,y=z.className,Aa;for(var v=0;v<U.length;v++){x=U[v];if(x.onTap&&y.indexOf("pswp__"+x.name)>-1){x.onTap();Aa=true}}if(Aa){if(w.stopPropagation){w.stopPropagation()}a=true;var Ab=i.features.isOldAndroid?600:30;d=setTimeout(function(){a=false},Ab)}},k=function(){return !S.likelyTouchDevice||q.mouseUsed||screen.width>1200},c=function(v,w,x){i[(x?"add":"remove")+"Class"](v,"pswp__"+w)},l=function(){var v=(q.getNumItemsFn()===1);if(v!==N){c(Y,"ui--one-slide",v);N=v}},p=function(){c(J,"share-modal--hidden",L)},s=function(){L=!L;if(!L){p();setTimeout(function(){if(!L){i.addClass(J,"pswp__share-modal--fade-in")}},30)}else{i.removeClass(J,"pswp__share-modal--fade-in");setTimeout(function(){if(L){p()}},300)}if(!L){e()}return false},t=function(v){v=v||window.event;var w=v.target||v.srcElement;S.shout("shareLinkClick",v,w);if(!w.href){return false}if(w.hasAttribute("download")){return true}window.open(w.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100));if(!L){s()}return false},e=function(){var v="",y,Ab,z,Aa,x;for(var w=0;w<q.shareButtons.length;w++){y=q.shareButtons[w];z=q.getImageURLForShare(y);Aa=q.getPageURLForShare(y);x=q.getTextForShare(y);Ab=y.url.replace("{{url}}",encodeURIComponent(Aa)).replace("{{image_url}}",encodeURIComponent(z)).replace("{{raw_image_url}}",z).replace("{{text}}",encodeURIComponent(x));v+='<a href="'+Ab+'" target="_blank" class="pswp__share--'+y.id+'"'+(y.download?"download":"")+">"+y.label+"</a>";if(q.parseShareButtonOut){v=q.parseShareButtonOut(y,v)}}J.children[0].innerHTML=v;J.children[0].onclick=t},M=function(w){for(var v=0;v<q.closeElClasses.length;v++){if(i.hasClass(w,"pswp__"+q.closeElClasses[v])){return true}}},F,h,I=0,Q=function(){clearTimeout(h);I=0;if(f){j.setIdle(false)}},g=function(w){w=w?w:window.event;var v=w.relatedTarget||w.toElement;if(!v||v.nodeName==="HTML"){clearTimeout(h);h=setTimeout(function(){j.setIdle(true)},q.timeToIdleOutside)}},B=function(){if(q.fullscreenEl&&!i.features.isOldAndroid){if(!Z){Z=j.getFullscreenAPI()}if(Z){i.bind(document,Z.eventK,j.updateFullscreen);j.updateFullscreen();i.addClass(S.template,"pswp--supports-fs")}else{i.removeClass(S.template,"pswp--supports-fs")}}},E=function(){if(q.preloaderEl){C(true);u("beforeChange",function(){clearTimeout(D);D=setTimeout(function(){if(S.currItem&&S.currItem.loading){if(!S.allowProgressiveImg()||(S.currItem.img&&!S.currItem.img.naturalWidth)){C(false)}}else{C(true)}},q.loadingIndicatorDelay)});u("imageLoadComplete",function(w,v){if(S.currItem===v){C(true)}})}},C=function(v){if(W!==v){c(X,"preloader--active",!v);W=v}},m=function(v){var w=v.vGap;if(k()){var x=q.barsSize;if(q.captionEl&&x.bottom==="auto"){if(!r){r=i.createEl("pswp__caption pswp__caption--fake");r.appendChild(i.createEl("pswp__caption__center"));Y.insertBefore(r,P);i.addClass(Y,"pswp__ui--fit")}if(q.addCaptionHTMLFn(v,r,true)){var y=r.clientHeight;w.bottom=parseInt(y,10)||44}else{w.bottom=x.top}}else{w.bottom=x.bottom==="auto"?0:x.bottom}w.top=x.top}else{w.top=w.bottom=0}},n=function(){if(q.timeToIdle){u("mouseUsed",function(){i.bind(document,"mousemove",Q);i.bind(document,"mouseout",g);F=setInterval(function(){I++;if(I===2){j.setIdle(true)}},q.timeToIdle/2)})}},V=function(){u("onVerticalDrag",function(w){if(o&&w<0.95){j.hideControls()}else{if(!o&&w>=0.95){j.showControls()}}});var v;u("onPinchClose",function(w){if(o&&w<0.9){j.hideControls();v=true}else{if(v&&!o&&w>0.9){j.showControls()}}});u("zoomGestureEnded",function(){v=false;if(v&&!o){j.showControls()}})};var U=[{name:"caption",option:"captionEl",onInit:function(v){P=v}},{name:"share-modal",option:"shareEl",onInit:function(v){J=v},onTap:function(){s()}},{name:"button--share",option:"shareEl",onInit:function(v){R=v},onTap:function(){s()}},{name:"button--zoom",option:"zoomEl",onTap:S.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(v){O=v}},{name:"button--close",option:"closeEl",onTap:S.close},{name:"button--arrow--left",option:"arrowEl",onTap:S.prev},{name:"button--arrow--right",option:"arrowEl",onTap:S.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){if(Z.isFullscreen()){Z.exit()}else{Z.enter()}}},{name:"preloader",option:"preloaderEl",onInit:function(v){X=v}}];var H=function(){var w,v,y;var x=function(Aa){if(!Aa){return}var Ac=Aa.length;for(var Ab=0;Ab<Ac;Ab++){w=Aa[Ab];v=w.className;for(var Ad=0;Ad<U.length;Ad++){y=U[Ad];if(v.indexOf("pswp__"+y.name)>-1){if(q[y.option]){i.removeClass(w,"pswp__element--disabled");if(y.onInit){y.onInit(w)}}else{i.addClass(w,"pswp__element--disabled")}}}}};x(Y.children);var z=i.getChildByClass(Y,"pswp__top-bar");if(z){x(z.children)}};j.init=function(){i.extend(S.options,T,true);q=S.options;Y=i.getChildByClass(S.scrollWrap,"pswp__ui");u=S.listen;V();u("beforeChange",j.update);u("doubleTap",function(v){var w=S.currItem.initialZoomLevel;if(S.getZoomLevel()!==w){S.zoomTo(w,v,333)}else{S.zoomTo(q.getDoubleTapZoom(false,S.currItem),v,333)}});u("preventDragEvent",function(v,w,x){var y=v.target||v.srcElement;if(y&&y.className&&v.type.indexOf("mouse")>-1&&(y.className.indexOf("__caption")>0||(/(SMALL|STRONG|EM)/i).test(y.tagName))){x.prevent=false}});u("bindEvents",function(){i.bind(Y,"pswpTap click",G);i.bind(S.scrollWrap,"pswpTap",j.onGlobalTap);if(!S.likelyTouchDevice){i.bind(S.scrollWrap,"mouseover",j.onMouseOver)}});u("unbindEvents",function(){if(!L){s()}if(F){clearInterval(F)}i.unbind(document,"mouseout",g);i.unbind(document,"mousemove",Q);i.unbind(Y,"pswpTap click",G);i.unbind(S.scrollWrap,"pswpTap",j.onGlobalTap);i.unbind(S.scrollWrap,"mouseover",j.onMouseOver);if(Z){i.unbind(document,Z.eventK,j.updateFullscreen);if(Z.isFullscreen()){q.hideAnimationDuration=0;Z.exit()}Z=null}});u("destroy",function(){if(q.captionEl){if(r){Y.removeChild(r)}i.removeClass(P,"pswp__caption--empty")}if(J){J.children[0].onclick=null}i.removeClass(Y,"pswp__ui--over-close");i.addClass(Y,"pswp__ui--hidden");j.setIdle(false)});if(!q.showAnimationDuration){i.removeClass(Y,"pswp__ui--hidden")}u("initialZoomIn",function(){if(q.showAnimationDuration){i.removeClass(Y,"pswp__ui--hidden")}});u("initialZoomOut",function(){i.addClass(Y,"pswp__ui--hidden")});u("parseVerticalMargin",m);H();if(q.shareEl&&R&&J){L=true}l();n();B();E()};j.setIdle=function(v){f=v;c(Y,"ui--idle",v)};j.update=function(){if(o&&S.currItem){j.updateIndexIndicator();if(q.captionEl){q.addCaptionHTMLFn(S.currItem,P);c(P,"caption--empty",!S.currItem.title)}b=true}else{b=false}if(!L){s()}l()};j.updateFullscreen=function(v){if(v){setTimeout(function(){S.setScrollOffset(0,i.getScrollY())},50)}i[(Z.isFullscreen()?"add":"remove")+"Class"](S.template,"pswp--fs")};j.updateIndexIndicator=function(){if(q.counterEl){O.innerHTML=(S.getCurrentIndex()+1)+q.indexIndicatorSep+q.getNumItemsFn()}};j.onGlobalTap=function(v){v=v||window.event;var w=v.target||v.srcElement;if(a){return}if(v.detail&&v.detail.pointerType==="mouse"){if(M(w)){S.close();return}if(i.hasClass(w,"pswp__img")){if(S.getZoomLevel()===1&&S.getZoomLevel()<=S.currItem.fitRatio){if(q.clickToCloseNonZoomable){S.close()}}else{S.toggleDesktopZoom(v.detail.releasePoint)}}}else{if(q.tapToToggleControls){if(o){}else{}}if(q.tapToClose&&(i.hasClass(w,"pswp__img")||M(w))){S.close();return}}};j.onMouseOver=function(v){v=v||window.event;var w=v.target||v.srcElement;c(Y,"ui--over-close",M(w))};j.hideControls=function(){i.addClass(Y,"pswp__ui--hidden");o=false};j.showControls=function(){o=true;if(!b){j.update()}i.removeClass(Y,"pswp__ui--hidden")};j.supportsFullscreen=function(){var v=document;return !!(v.exitFullscreen||v.mozCancelFullScreen||v.webkitExitFullscreen||v.msExitFullscreen)};j.getFullscreenAPI=function(){var w=document.documentElement,x,v="fullscreenchange";if(w.requestFullscreen){x={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:v}}else{if(w.mozRequestFullScreen){x={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+v}}else{if(w.webkitRequestFullscreen){x={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+v}}else{if(w.msRequestFullscreen){x={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}}}}}if(x){x.enter=function(){K=q.closeOnScroll;q.closeOnScroll=false;if(this.enterK==="webkitRequestFullscreen"){S.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)}else{return S.template[this.enterK]()}};x.exit=function(){q.closeOnScroll=K;return document[this.exitK]()};x.isFullscreen=function(){return document[this.elementK]}}return x}};return A});